{"version":3,"sources":["app/scripts.babel/popup.js"],"names":[],"mappings":"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","file":"app/scripts.babel/popup.js","sourcesContent":["'use strict';\n\n//import Blacklist from './blacklist';\n\nconsole.log('Before popup created.');\n\nclass Popup {\n  constructor() {\n    this.blacklistedWords = this.loadWordsFromStorage();\n    this.blacklistMap = {}; // this.createBlackListMap();\n    this.updateBlackListMap();\n\n    // Broadcast to main extension.\n    this.broadcastWords();\n\n    this.blacklistWord('test');\n    this.blacklistWord('curvin');\n    this.tabs = [];\n\n    console.log('Successfully created popup!');\n\n    chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n      console.log('Heard command!');\n      if(request.command === 'update') {\n        console.log('Broadcast sent');\n        sendResponse({blackListedWords: this.blacklistedWords});\n      }\n\n      if(request.tab) {\n        // Swag \n      }\n    });\n  }\n\n  broadcastWords() {\n    console.log('Broadcasting to tabs.');\n    chrome.tabs.query({active: true, currentWindow: true, url:'*://twitter.com/*'}, (tabs) => {\n        tabs.forEach((tab) => {\n\n          chrome.tabs.sendMessage(tab.id, {blacklistedWords: this.blacklistedWords}, function(response) {\n            if(response && response.status) {\n              console.log('Status response received');\n              console.log(response.status);\n              console.log(response);\n            } \n          });\n        });\n        });\n\n    /*chrome.runtime.sendMessage({blacklistedWords: this.blacklistedWords}, function(response) {\n      console.log(response.status);\n      });*/\n  }\n\n\n  updateBlackListMap() {\n    this.blacklistMap = this.createBlackListMap();\n  }\n\n  createBlackListMap() {\n    var map = {};\n    console.log(this.blacklistedWords);\n    this.blacklistedWords.forEach(function(word) {\n      map[word] = true;\n    }); \n\n    return map;\n  }\n\n  loadWordsFromStorage() {\n    var words = localStorage['twittermute.blacklist'] || [];\n    if(!(words instanceof Array)) {\n      console.log(words);\n      console.log(typeof words);\n      console.log(words instanceof Array);\n      words = words.split(',');\n\n    }\n    console.log(words);\n    return words;\n  }\n\n  blacklistWord(word) {\n    if (!localStorage['twittermute.blacklist']) {\n      localStorage['twittermute.blacklist'] = this.blacklistedWords; // if undefined, set to our currently blacklisted words.\n    }\n\n    let lcWord = word.toLowerCase();\n    if(!this.blacklistMap[lcWord]) {\n      this.blacklistedWords.push(word.toLowerCase());\n    }\n\n    this.updateLocalStorage();\n  }\n\n  whitelistWord(word) {\n    var lcWord = word.toLowerCase();\n    var newArray = this.blacklistedWords.filter(function(item) {\n      return item.toLowerCase() !== lcWord; \n    });\n\n    delete this.blacklistMap[lcWord]; // Remove key from the Map.\n    this.blacklistedWords = newArray;\n    this.updateLocalStorage();\n  }\n\n  updateLocalStorage() {\n    localStorage['twittermute.blacklist'] = this.blacklistedWords;\n  }\n}\n\nconsole.log(chrome.tabs);\nlet popup = new Popup();\n\n\n//export default Popup;\n"]}